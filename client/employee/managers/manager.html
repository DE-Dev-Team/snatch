<template name="manager">

<head>
	<title> Bandersnatch - Managers </title>
</head>	
	<!-- {{#if isInRole 'manager'}} -->
	
	<div class='ManagerContainer'>
	
		<h1> Managers </h1>
	
		<label id="notif">App Running</label>
		<div class='appSwitch'>
			<button type="button" id="on" class="on">Turn ON</button>
			<button type="button" id="off" class="off">Turn OFF</button>
			<button type="button" id="sendEmail" class="email">Send Email</button>
			<h4 id="notif2">Email Sent!</h4>
		</div>
		

		
		<div class='manage'>
			<div class="newItem">
				<form id='addItem'>
					<div class='name'>
						<label for='itemTitle'>Name of Item:</label>
						<input type='text' id='itemTitle'>
					</div>	
					<div class='price'>
						<label for='itemPrice'>Price of Item:</label>
						$ <input type="text" class="money" id="dollar"/> . <input type="text" class="money" id="cents"/>
					</div>
			        <label for="itemType">Category of New Item</label>
			        <select id="itemType">
			           <option value="select" id="select">Select</option>
			           <option value="flavor">Shake Flavor</option>
					   <option value="mixin">Shake Mixin</option>
			           <option value="bagel">Bagel</option>
					   <option value="snack">Snack</option>
					   <option value="bev">Beverage</option>
			        </select>
				</form>
				<button type=button id=addNewItem> Add New Item </button>
				<h4 id='notifAdded'>Item Added to Menu</h4>
			</div>


			<div class="delItem">
				<!-- Claire's Thoughts: 
					 2 drop down menus: 
						1. the "type" of item you wish to delete. ie bagel, flavor, etc. 
						2. Second drop down fills with all items currently in that db
					delete that specific item
				-->
				<form name="findDelItem">
					<select id="first-choice">
			           <option value="select">Select</option>
					   <option value="bagel">Bagel</option>
					   <option value="snack">Snack</option>
					   <option value="bev">Beverage</option>
					   <option value="mixin">Shake Mixin</option>
			           <option value="flavor">Shake Flavor</option>
					</select>
						
					<script>
					var oldChoice = '';
					$('#deleteItem').click(function() {
						var listLength = 0;
						console.log('delete:' ,$('#deleteItem').val()); 
						if($('#first-choice').val() != 'select' && $('#first-choice').val() != oldChoice){
							if(oldChoice != ''){
								console.log('need to delete current options');
								var sel = document.getElementById('deleteItem');
								while (sel.firstChild) {
								    sel.removeChild(sel.firstChild);
								}
							}
							/*************** DELETE A BAGEL ***************/
							if($('#first-choice').val() == 'bagel'){
								var bagels = Bagels.find().fetch(); 
								var sel = document.getElementById('deleteItem');
								var fragment = document.createDocumentFragment();

								bagels.forEach(function(bagel, index) {
								
								    var opt = document.createElement('option');
								    opt.innerHTML = bagel.type;
								    opt.value = bagel.type;
								    fragment.appendChild(opt);
								});
								listLength+=1;
								sel.appendChild(fragment);
							}
							/*************** DELETE A SNACK ***************/
							else if($('#first-choice').val() == 'snack'){
								var snacks = Snacks.find().fetch(); 
								var sel = document.getElementById('deleteItem');
								var fragment = document.createDocumentFragment();

								snacks.forEach(function(snack, index) {
									listLength+=1;
								    var opt = document.createElement('option');
								    opt.innerHTML = snack.type;
								    opt.value = snack.type;
								    fragment.appendChild(opt);
								});

								sel.appendChild(fragment);
							}
					
							/*************** DELETE A BEV ***************/
							else if($('#first-choice').val() == 'bev'){
								var snacks = Beverages.find().fetch(); 
								var sel = document.getElementById('deleteItem');
								var fragment = document.createDocumentFragment();

								snacks.forEach(function(snack, index) {
									listLength+=1;
								    var opt = document.createElement('option');
								    opt.innerHTML = snack.type;
								    opt.value = snack.type;
								    fragment.appendChild(opt);
								});

								sel.appendChild(fragment);
							}
					
							/*************** DELETE A MIXIN ***************/
							else if($('#first-choice').val() == 'mixin'){
								var snacks = Milkshakes.find({type: 'mixin'}).fetch(); 
								var sel = document.getElementById('deleteItem');
								var fragment = document.createDocumentFragment();

								snacks.forEach(function(snack, index) {
									listLength+=1;
								    var opt = document.createElement('option');
								    opt.innerHTML = snack.name;
								    opt.value = snack.name;
								    fragment.appendChild(opt);
								});

								sel.appendChild(fragment);
							}

							/*************** DELETE A FLAVOR ***************/
							else if($('#first-choice').val() == 'flavor'){
								var snacks = Milkshakes.find({type: 'flavor'}).fetch(); 
								var sel = document.getElementById('deleteItem');
								var fragment = document.createDocumentFragment();

								snacks.forEach(function(thing, index) {
									listLength+=1;
								    var opt = document.createElement('option');
								    opt.innerHTML = thing.name;
								    opt.value = thing.name;
								    fragment.appendChild(opt);
								});

								sel.appendChild(fragment);
							}
						}
						oldChoice = $('#first-choice').val();
					});
					</script>	
						
					<select id='deleteItem'>
						<option> Delete an Item </option>
					</select>
					
					
					<br> <br>
					



					<br>
					
					<button id='delThis'> Delete Item </button>
				</form>
			
			</div>
		</div>
	</div>
	
	
	
 <!--  {{else}}
     {{> deniedEmp}}
    {{/if}}  -->
	
</template>






